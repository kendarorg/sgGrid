angular.module("sgGrid",[]).constant("sgGrid.version",[1,0,0]).directive("sgGrid",["$http","sgGridPaginationService",function(e,a){return{restrict:"A",require:"ngModel",scope:{sgCurrentPage:"=",sgPageSize:"=?",sgMaxPages:"=?",sgCount:"=",sgLoadData:"&",sgButtons:"="},link:function(e,n,g,t){e.sgMaxPages||(e.sgMaxPages=5),e.sgPageSize||(e.sgPageSize=5),e.$watch(function(){return e.sgPageSize},function(){e.sgLoadData()(0)}),e.$watchCollection(function(){return t.$modelValue},function(){for(var n=e.sgCurrentPage,g=(n>0?Math.min(n,n-e.sgMaxPages):0,{currentPage:e.sgCurrentPage,maxPages:e.sgMaxPages,count:e.sgCount,pageSize:e.sgPageSize}),t=a(g),r=[],s=0;s<t.length;s++){var i=t[s];r.push({label:"#"==i.type?i.index+1:i.type,pageIndex:i.index,selected:i.selected,go:function(){e.sgLoadData()(this.pageIndex)}})}e.sgButtons=r})}}}]).service("sgGridPaginationService",[function(){return function(e){var a=[],n=0,g=0,t=-1,r=function(e,n,g){a.push({type:e,index:n,selected:g?g:!1})},s=e.maxPages/2;g=0,e.currentPage>s&&(g=e.currentPage-s),t=Math.ceil(e.count/e.pageSize),n=Math.min(g+e.maxPages,t),g>0&&r("<<",0),e.currentPage>0&&r("<",e.currentPage-1);for(var i=g;n>i;i++)r("#",i,i==e.currentPage);return e.currentPage<t-1&&(r(">",e.currentPage+1),e.currentPage<t-e.maxPages/2&&r(">>",t-1)),a}}]);