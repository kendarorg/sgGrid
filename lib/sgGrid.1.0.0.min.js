angular.module("sgGrid",[]).constant("sgGrid.version",[1,0,0]).directive("sgGrid",["$http","sgGridPaginationService",function(e,a){return{loaded:!1,restrict:"A",require:"ngModel",scope:{sgCurrentPage:"=",sgPageSize:"=?",sgMaxPages:"=?",sgCount:"=",sgLoadData:"&",sgButtons:"="},link:function(e,t,n,g){e.sgMaxPages||(e.sgMaxPages=5),e.sgPageSize||(e.sgPageSize=5),e.$watch(function(){return e.sgPageSize},function(){return this.loaded?void e.sgLoadData()(0):void(this.loaded=!0)}),e.$watchCollection(function(){return g.$modelValue},function(){for(var t=e.sgCurrentPage,n=(t>0?Math.min(t,t-e.sgMaxPages):0,{currentPage:e.sgCurrentPage,maxPages:e.sgMaxPages,count:e.sgCount,pageSize:e.sgPageSize}),g=a(n),r=[],s=0;s<g.length;s++){var i=g[s];r.push({label:"#"==i.type?i.index+1:i.type,pageIndex:i.index,selected:i.selected,go:function(){e.sgLoadData()(this.pageIndex)}})}e.sgButtons=r})}}}]).service("sgGridPaginationService",[function(){return function(e){var a=[],t=0,n=0,g=-1,r=function(e,t,n){a.push({type:e,index:t,selected:n?n:!1})},s=e.maxPages/2;n=0,e.currentPage>s&&(n=e.currentPage-s),g=Math.ceil(e.count/e.pageSize),t=Math.min(n+e.maxPages,g),n>0&&r("<<",0),e.currentPage>0&&r("<",e.currentPage-1);for(var i=n;t>i;i++)r("#",i,i==e.currentPage);return e.currentPage<g-1&&(r(">",e.currentPage+1),e.currentPage<g-e.maxPages/2&&r(">>",g-1)),a}}]);